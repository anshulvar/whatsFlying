webpackJsonp([1],{0:function(t,n,l){t.exports=l("cDNt")},cDNt:function(t,n,l){"use strict";function e(t){return r._16(0,[(t()(),r._15(-1,null,["\n"])),(t()(),r._3(1,0,null,null,13,"html",[],null,null,null,null,null)),(t()(),r._15(-1,null,["\n  "])),(t()(),r._3(3,0,null,null,2,"head",[],null,null,null,null,null)),(t()(),r._15(-1,null,["\n    "])),(t()(),r._15(-1,null,["\n  "])),(t()(),r._15(-1,null,["\n    "])),(t()(),r._3(7,0,null,null,6,"body",[],null,null,null,null,null)),(t()(),r._15(-1,null,["\n        "])),(t()(),r._3(9,0,null,null,1,"h1",[["align","center"]],null,null,null,null,null)),(t()(),r._15(-1,null,["Whats Flying !!"])),(t()(),r._15(-1,null,[" \n      "])),(t()(),r._3(12,0,null,null,0,"div",[["id","googleMap"]],null,null,null,null,null)),(t()(),r._15(-1,null,["\n  "])),(t()(),r._15(-1,null,["\n"])),(t()(),r._15(-1,null,["\n\n"]))],null,null)}function i(t){return r._16(0,[(t()(),r._3(0,0,null,null,1,"app-root",[],null,null,null,e,f)),r._1(1,114688,null,0,g,[a],null,null)],function(t,n){t(n,1,0)},null)}Object.defineProperty(n,"__esModule",{value:!0});var r=l("/oeL"),o={production:!0},u=function(){function t(){}return t}(),s=(l("GQSG"),l("CPp0")),a=function(){function t(t){this._http=t}return t.prototype.getFlights=function(){return this._http.get("https://opensky-network.org/api/states/all").map(function(t){return t.json()})},t.ctorParameters=function(){return[{type:s.d}]},t}(),c=function(){function t(){}return t}(),g=function(){function t(t){this.flightService=t,this.flightList=new Array,this.markersArray=new Array}return t.prototype.loadFlightsDetails=function(t,n){this.flightList=[],this.flights=t.states;for(var l=0,e=this.flights;l<e.length;l++){var i=e[l],r=new c;r.id=i[0],r.origin_country=i[2],r.longitude=i[5],r.latitude=i[6],r.altitude=i[7],r.on_ground=i[8],r.velocity=i[9],r.heading=i[10],r.vertical_rate=i[11],r.baro_altitude=i[13],this.flightList.push(r)}this.updateMapWithFlightList(this.flightList,n),console.log(this.flightList)},t.prototype.flightDetailsError=function(t){console.log("flight update service faileed"+t)},t.prototype.stopRefreshing=function(){},t.prototype.updateMapWithFlightList=function(t,n){console.log("updating map with"+t.length+"flights");for(var l=0,e=t;l<e.length;l++){var i=e[l],r={lat:i.latitude,lng:i.longitude},o=new google.maps.Marker({position:r,icon:"/whatsFlying/assets/icon18.png",map:n,title:"Flight Details: \nOrgin : "+i.origin_country+"\nAltitude : "+i.altitude+"ft \nSpeed : "+i.velocity+"mph \nVertical Speed : "+i.vertical_rate});this.markersArray.push(o)}},t.prototype.clearMarkers=function(){console.log("clearing "+this.markersArray.length+"markers from map");for(var t=0;t<this.markersArray.length;t++)this.markersArray[t].setMap(null);this.markersArray.length=0},t.prototype.updateFlights=function(t,n){var l=this;this.clearMarkers(),t.getFlights().subscribe(function(t){return l.loadFlightsDetails(t,n)},function(t){return l.flightDetailsError(t)},function(){return l.stopRefreshing()})},t.prototype.setCurrentLocation=function(t,n){var l={lat:n.coords.latitude,lng:n.coords.longitude};t.setCenter(l)},t.prototype.ngOnInit=function(){var t=this,n={lat:0,lng:0},l={center:n,zoom:6,fullscreenControl:!0},e=new google.maps.Map(document.getElementById("googleMap"),l);window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(this.setCurrentLocation.bind(null,e)),this.flightService.getFlights().subscribe(function(n){return t.loadFlightsDetails(n,e)},function(n){return t.flightDetailsError(n)},function(){return t.stopRefreshing()}),setInterval(this.updateFlights.bind(this,this.flightService,e),2e3)},t.ctorParameters=function(){return[{type:a}]},t}(),h=[""],_=["#googleMap[_ngcontent-%COMP%] {\n        height: 850px;\n        width: 100%;\n       }",h],f=r._0({encapsulation:0,styles:_,data:{}}),p=r.Y("app-root",g,i,{},{},[]),d=l("qbdv"),y=l("fc+i"),v=r.Z(u,[g],function(t){return r._12([r._13(512,r.i,r.W,[[8,[p]],[3,r.i],r.x]),r._13(4608,s.c,s.c,[]),r._13(4608,s.g,s.b,[]),r._13(5120,s.i,s.j,[]),r._13(4608,s.h,s.h,[s.c,s.g,s.i]),r._13(4608,s.f,s.a,[]),r._13(5120,s.d,s.k,[s.h,s.f]),r._13(5120,r.v,r._11,[[3,r.v]]),r._13(4608,d.d,d.c,[r.v]),r._13(4608,r.h,r.h,[]),r._13(5120,r.a,r._4,[]),r._13(5120,r.t,r._9,[]),r._13(5120,r.u,r._10,[]),r._13(4608,y.b,y.s,[d.b]),r._13(6144,r.H,null,[y.b]),r._13(4608,y.e,y.f,[]),r._13(5120,y.c,function(t,n,l,e){return[new y.k(t),new y.o(n),new y.n(l,e)]},[d.b,d.b,d.b,y.e]),r._13(4608,y.d,y.d,[y.c,r.z]),r._13(135680,y.m,y.m,[d.b]),r._13(4608,y.l,y.l,[y.d,y.m]),r._13(6144,r.F,null,[y.l]),r._13(6144,y.p,null,[y.m]),r._13(4608,r.L,r.L,[r.z]),r._13(4608,y.g,y.g,[d.b]),r._13(4608,y.i,y.i,[d.b]),r._13(4608,a,a,[s.d]),r._13(512,s.e,s.e,[]),r._13(512,d.a,d.a,[]),r._13(1024,r.l,y.q,[]),r._13(1024,r.b,function(t,n){return[y.r(t,n)]},[[2,y.h],[2,r.y]]),r._13(512,r.c,r.c,[[2,r.b]]),r._13(131584,r._2,r._2,[r.z,r.X,r.r,r.l,r.i,r.c]),r._13(2048,r.e,null,[r._2]),r._13(512,r.d,r.d,[r.e]),r._13(512,y.a,y.a,[[3,y.a]]),r._13(512,u,u,[])])});o.production&&Object(r.R)(),Object(y.j)().bootstrapModuleFactory(v).catch(function(t){return console.log(t)})},gFIY:function(t,n){function l(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}l.keys=function(){return[]},l.resolve=l,t.exports=l,l.id="gFIY"}},[0]);