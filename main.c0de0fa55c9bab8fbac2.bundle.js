webpackJsonp([1],{0:function(l,n,t){l.exports=t("cDNt")},cDNt:function(l,n,t){"use strict";function u(l){return i._16(0,[(l()(),i._15(-1,null,["\n"])),(l()(),i._3(1,0,null,null,39,"html",[],null,null,null,null,null)),(l()(),i._15(-1,null,["\n"])),(l()(),i._3(3,0,null,null,36,"body",[],null,null,null,null,null)),(l()(),i._15(-1,null,["\n    "])),(l()(),i._3(5,0,null,null,1,"h1",[["align","center"],["id","container"]],null,null,null,null,null)),(l()(),i._15(-1,null,["Whats Flying !!"])),(l()(),i._15(-1,null,["\n  "])),(l()(),i._3(8,0,null,null,0,"div",[["id","googleMap"]],null,null,null,null,null)),(l()(),i._15(-1,null,["\n  "])),(l()(),i._3(10,0,null,null,28,"div",[["class","mainContainer"]],null,null,null,null,null)),(l()(),i._15(-1,null,["\n    "])),(l()(),i._3(12,0,null,null,25,"table",[["class","rightColumn"]],null,null,null,null,null)),(l()(),i._15(-1,null,["\n      "])),(l()(),i._3(14,0,null,null,23,"tbody",[],null,null,null,null,null)),(l()(),i._3(15,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),i._15(-1,null,["\n        "])),(l()(),i._3(17,0,null,null,0,"th",[],null,null,null,null,null)),(l()(),i._15(-1,null,["\n        "])),(l()(),i._3(19,0,null,null,0,"th",[],null,null,null,null,null)),(l()(),i._15(-1,null,["\n      "])),(l()(),i._15(-1,null,["\n      "])),(l()(),i._3(22,0,null,null,7,"tr",[],null,null,null,null,null)),(l()(),i._15(-1,null,["\n        "])),(l()(),i._3(24,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),i._15(-1,null,["Total flights on map"])),(l()(),i._15(-1,null,["\n        "])),(l()(),i._3(27,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),i._15(28,null,["",""])),(l()(),i._15(-1,null,["\n      "])),(l()(),i._15(-1,null,["\n      "])),(l()(),i._3(31,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),i._15(-1,null,["\n        "])),(l()(),i._3(33,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),i._15(-1,null,["\n        "])),(l()(),i._3(35,0,null,null,0,"td",[],null,null,null,null,null)),(l()(),i._15(-1,null,["\n      "])),(l()(),i._15(-1,null,["\n    "])),(l()(),i._15(-1,null,["\n  "])),(l()(),i._15(-1,null,["\n"])),(l()(),i._15(-1,null,["\n"]))],null,function(l,n){l(n,28,0,n.component.flightMarkers.size())})}function e(l){return i._16(0,[(l()(),i._3(0,0,null,null,1,"app-root",[],null,null,null,u,p)),i._1(1,114688,null,0,_,[g],null,null)],function(l,n){l(n,1,0)},null)}Object.defineProperty(n,"__esModule",{value:!0});var i=t("/oeL"),o={production:!0},r=function(){function l(){}return l}(),a=t("9fJC"),s=(t("GQSG"),t("CPp0")),g=function(){function l(l){this._http=l}return l.prototype.getFlights=function(){return this._http.get("https://opensky-network.org/api/states/all").map(function(l){return l.json()})},l.ctorParameters=function(){return[{type:s.d}]},l}(),c=function(){function l(){}return l}(),_=function(){function l(l){this.flightService=l,this.flightList=new Array,this.flightMarkers=new a.Dictionary}return l.prototype.loadFlightsDetails=function(l,n){this.flightList=[];for(var t=0,u=l.states;t<u.length;t++){var e=u[t],i=new c;i.id=e[0],i.origin_country=e[2],i.longitude=e[5],i.latitude=e[6],i.altitude=e[7],i.on_ground=e[8],i.velocity=e[9],i.heading=e[10],i.vertical_rate=e[11],i.baro_altitude=e[13],this.flightList.push(i)}this.updateMapWithFlightList(this.flightList,n)},l.prototype.flightDetailsError=function(l){console.log("flight update service failed"+l)},l.prototype.getFlightImage=function(l){return l>=337.5||l<22.5?"/whatsFlying/assets/North.png":l>=22.5&&l<67.5?"/whatsFlying/assets/NorthEast.png":l>=67.5&&l<112.5?"/whatsFlying/assets/East.png":l>=112.5&&l<157.5?"/whatsFlying/assets/SouthEast.png":l>=157.5&&l<202.5?"/whatsFlying/assets/South.png":l>=202.5&&l<247.5?"/whatsFlying/assets/SouthWest.png":l>=247.5&&l<292.5?"/whatsFlying/assets/West.png":"/whatsFlying/assets/NorthWest.png"},l.prototype.updateMapWithFlightList=function(l,n){console.log("updating map with"+l.length+"flights");for(var t=this,u=0,e=l;u<e.length;u++){var i=e[u];!function(l){if(null!=l.latitude&&null!=l.latitude){var u={lat:l.latitude,lng:l.longitude};if(t.flightMarkers.containsKey(l.id)){var e=t.flightMarkers.getValue(l.id);e.setPosition(u),t.flightMarkers.setValue(l.id,e)}else{var i=new google.maps.Marker({position:u,icon:t.getFlightImage(l.heading),map:n}),o=new google.maps.InfoWindow({content:"Orgin : "+l.origin_country+"<br /> Altitude : "+l.altitude+" ft<br />Speed : "+l.velocity+" mph <br />Vertical Speed : "+l.vertical_rate+" <br />Heading : "+l.heading+" - E"});i.addListener("click",function(){o.open(n,i)}),i.addListener("mouseover",function(){o.open(n,i)}),i.addListener("mouseout",function(){o.close(n,i)}),t.flightMarkers.setValue(l.id,i)}}}(i)}},l.prototype.updateFlights=function(l,n){var t=this;l.getFlights().subscribe(function(l){return t.loadFlightsDetails(l,n)},function(l){return t.flightDetailsError(l)})},l.prototype.setCurrentLocation=function(l,n){var t={lat:n.coords.latitude,lng:n.coords.longitude};l.setCenter(t)},l.prototype.ngOnInit=function(){var l=this,n={lat:41.8781,lng:-87.6298},t={center:n,zoom:8,fullscreenControl:!0},u=new google.maps.Map(document.getElementById("googleMap"),t);window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(this.setCurrentLocation.bind(null,u)),this.flightService.getFlights().subscribe(function(n){return l.loadFlightsDetails(n,u)},function(n){return l.flightDetailsError(n)}),setInterval(this.updateFlights.bind(this,this.flightService,u),2e3)},l.ctorParameters=function(){return[{type:g}]},l}(),h=["#googleMap[_ngcontent-%COMP%]{height:100%;position:absolute;top:0;bottom:-200px;left:0;right:0;z-index:0}#container[_ngcontent-%COMP%]{z-index:100;position:relative}.mainContainer[_ngcontent-%COMP%]{background-color:#1f1f1f;z-index:1002!important;position:fixed;right:56px;bottom:20px;opacity:.8}.rightColumn[_ngcontent-%COMP%]{font-size:15px;color:#fff;vertical-align:bottom;width:170px;min-width:65px}"],d=[h],p=i._0({encapsulation:0,styles:d,data:{}}),f=i.Y("app-root",_,e,{},{},[]),b=t("qbdv"),y=t("fc+i"),m=i.Z(r,[_],function(l){return i._12([i._13(512,i.i,i.W,[[8,[f]],[3,i.i],i.x]),i._13(4608,s.c,s.c,[]),i._13(4608,s.g,s.b,[]),i._13(5120,s.i,s.j,[]),i._13(4608,s.h,s.h,[s.c,s.g,s.i]),i._13(4608,s.f,s.a,[]),i._13(5120,s.d,s.k,[s.h,s.f]),i._13(5120,i.v,i._11,[[3,i.v]]),i._13(4608,b.d,b.c,[i.v]),i._13(4608,i.h,i.h,[]),i._13(5120,i.a,i._4,[]),i._13(5120,i.t,i._9,[]),i._13(5120,i.u,i._10,[]),i._13(4608,y.b,y.s,[b.b]),i._13(6144,i.H,null,[y.b]),i._13(4608,y.e,y.f,[]),i._13(5120,y.c,function(l,n,t,u){return[new y.k(l),new y.o(n),new y.n(t,u)]},[b.b,b.b,b.b,y.e]),i._13(4608,y.d,y.d,[y.c,i.z]),i._13(135680,y.m,y.m,[b.b]),i._13(4608,y.l,y.l,[y.d,y.m]),i._13(6144,i.F,null,[y.l]),i._13(6144,y.p,null,[y.m]),i._13(4608,i.L,i.L,[i.z]),i._13(4608,y.g,y.g,[b.b]),i._13(4608,y.i,y.i,[b.b]),i._13(4608,g,g,[s.d]),i._13(512,s.e,s.e,[]),i._13(512,b.a,b.a,[]),i._13(1024,i.l,y.q,[]),i._13(1024,i.b,function(l,n){return[y.r(l,n)]},[[2,y.h],[2,i.y]]),i._13(512,i.c,i.c,[[2,i.b]]),i._13(131584,i._2,i._2,[i.z,i.X,i.r,i.l,i.i,i.c]),i._13(2048,i.e,null,[i._2]),i._13(512,i.d,i.d,[i.e]),i._13(512,y.a,y.a,[[3,y.a]]),i._13(512,r,r,[])])});o.production&&Object(i.R)(),Object(y.j)().bootstrapModuleFactory(m).catch(function(l){return console.log(l)})},gFIY:function(l,n){function t(l){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+l+"'.")})}t.keys=function(){return[]},t.resolve=t,l.exports=t,t.id="gFIY"}},[0]);